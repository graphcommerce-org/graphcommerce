{
  "$schema": "../../node_modules/@graphql-mesh/types/config-schema.json",
  "sources": [
    {
      "name": "graphcms",
      "handler": {
        "graphql": {
          "endpoint": "${GRAPHCMS_URL}",
          "operationHeaders": {
            "Authorization": "${GRAPHCMS_BEARER}"
          },
          "schemaHeaders": {
            "Authorization": "${GRAPHCMS_BEARER}"
          },
          "cacheIntrospection": true
        }
      },
      "transforms": [
        {
          "filterSchema": [
            "Query.{pages,footer,usps,productpages,pagesConnection}",
            "Mutation.none"
          ]
        }
      ]
    },
    {
      "name": "m2",
      "handler": {
        "graphql": {
          "endpoint": "${MAGENTO_ENDPOINT}",
          "cacheIntrospection": true,
          "schemaHeaders": {
            "Store": "{context.req.headers.store}",
            "Authorization": "{context.req.headers.authorization}"
          },
          "operationHeaders": {
            "Store": "{context.req.headers.store}",
            "Authorization": "{context.req.headers.authorization}"
          }
        }
      }
    }
  ]
}
